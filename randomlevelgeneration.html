<html>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

<pre class="prettyprint">
import java.util.Random;

public class Test {
	public static boolean xreached = false;
	public static boolean yreached = false;
	public static int startx;
	public static int starty;
	public static int endx;
	public static int endy;
	public static int sizeX;
	public static int sizeY;

	public static void main(String[] args) {
		sizeX = 5;			
		sizeY = 5;			
		int randX = sizeX;
		int randY = sizeY;
		int threeWay;

		char[][] testLevel = new char[sizeX][sizeY];

		for (int a = 0; a < testLevel.length; a++) {
			for (int b = 0; b < testLevel.length; b++) {
				testLevel[a][b] = '0';
			}
		}
		boolean complete = false;

		Random random = new Random();

		startx = random.nextInt(randX);
		starty = random.nextInt(randY);
		endx = random.nextInt(randX);
		endy = random.nextInt(randY);

		if (startx == endx) {
			endx = random.nextInt(randX);
		}

		if (starty == endy) {
			endy = random.nextInt(randY);
		}

		System.out.print("startX: " + startx + " startY: " + starty);
		System.out.print(" endX: " + endx + " endY: " + endy + "\n");

		if (startx < endx) {
			testLevel[starty][startx] = 'R';
		} else if (startx > endx) {
			testLevel[starty][startx] = 'L';
		} else  if (starty < endy) {
			testLevel[starty][startx] = 'D';
		} else if (starty > endy) {
			testLevel[starty][startx] = 'U';
		}

		int currentx = startx;
		int currenty = starty;

		if (starty == endy) {
			yreached = true;
		}

		while (!complete) {
			if (!xreached) {
				if (startx < endx) {
					currentx++;

					if (!yreached) {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (starty > endy) {
								if (random.nextInt(2) == 1) {
									//coming from the left going up, with a split down
									testLevel[currenty][currentx] = '7';
									buildPath(currentx, currenty, 7, testLevel, true);
								} else {
									//coming from the left going up, with a split right
									testLevel[currenty][currentx] = '9';
								}
							} else if (starty < endy) {
								if (random.nextInt(2) == 1) {
									//coming from the left going down, with a split up
									testLevel[currenty][currentx] = '7';
									buildPath(currentx, currenty, 7, testLevel, true);
								} else {
									//coming from the left going down, with a split right
									testLevel[currenty][currentx] = 'A';
								}

							}

						} else {
							if (starty > endy) {
								//coming from the left going up
								testLevel[currenty][currentx] = '5';
							} else if (starty < endy) {
								//coming from the left going down
								testLevel[currenty][currentx] = '3';
							}
						}
					} else {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (random.nextInt(2) == 1) {
								//coming from the left going right, with a split up
								testLevel[currenty][currentx] = '9';
							} else {
								//coming from the left going right, with a split down
								testLevel[currenty][currentx] = 'A';
							}
						} else {
							//coming from the left going right
							testLevel[currenty][currentx] = '2';
						}
					}

				} else if (startx > endx) {
					currentx--;

					if (!yreached) {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (starty < endy) {
								if (random.nextInt(2) == 1) {
									//coming from the right going down, with a split up
									testLevel[currenty][currentx] = '8';
								} else {
									//coming from the right going down, with a split left
									testLevel[currenty][currentx] = 'A';
								}
							} else if (starty > endy) {
								if (random.nextInt(2) == 1) {
									//coming from the right going up, with a split down
									testLevel[currenty][currentx] = '8';
								} else {
									//coming from the right going up, with a split left
									testLevel[currenty][currentx] = '9';
								}

							}
						} else {
							if (starty < endy) {
								//coming from the right going down
								testLevel[currenty][currentx] = '4';
							} else if (starty > endy) {
								//coming from the right going up
								testLevel[currenty][currentx] = '6';
							}
						}

					} else {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (random.nextInt(2) == 1) {
								//coming from the right going left, with a split up
								testLevel[currenty][currentx] = '9';
							} else {
								//coming from the right going left, with a split down
								testLevel[currenty][currentx] = 'A';
							}
						} else {
							//coming from the right going left
							testLevel[currenty][currentx] = '2';
						}
					}
				}
			}

			if (currentx == endx) {
				xreached = true;
			}

			if (!yreached) {
				if (starty < endy) {
					currenty++;

					if (!xreached) {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (startx > endx) {
								if (random.nextInt(2) == 1) {
									//coming from the top going left, with a split down
									testLevel[currenty][currentx] = '7';
									buildPath(currentx, currenty, 7, testLevel, false);
								} else {
									//coming from the top going left, with a split right
									testLevel[currenty][currentx] = '9';
								}
							} else if (startx < endx) {
								if (random.nextInt(2) == 1) {
									//coming from the top going right, with a split down
									testLevel[currenty][currentx] = '8';
								} else {
									//coming from the top going right, with a split left
									testLevel[currenty][currentx] = '9';
								}
							}
						} else {
							if (startx > endx) {
								//coming from the top going left
								testLevel[currenty][currentx] = '5';
							} else if (startx < endx) {
								//coming from the top going right
								testLevel[currenty][currentx] = '6';
							}
						}
					} else {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (random.nextInt(2) == 1) {
								//coming from the top going down, with a split left
								testLevel[currenty][currentx] = '7';
								buildPath(currentx, currenty, 7, testLevel, false);
							} else {
								//coming from the top going down, with a split right
								testLevel[currenty][currentx] = '8';
							}
						} else {
							//coming from the top going down
							testLevel[currenty][currentx] = '1';
						}
					}
				} else if (starty > endy) {
					currenty--;

					if (!xreached) {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (startx < endx) {
								if (random.nextInt(2) == 1) {
									//coming from the bottom going right, with a split up
									testLevel[currenty][currentx] = '8';
								} else {
									//coming from the bottom going right, with a split left
									testLevel[currenty][currentx] = 'A';
								}
							} else if (startx > endx) {
								if (random.nextInt(2) == 1) {
									//coming from the bottom going left, with a split up
									testLevel[currenty][currentx] = '7';
									buildPath(currentx, currenty, 7, testLevel, false);
								} else {
									//coming from the bottom going left, with a split right
									testLevel[currenty][currentx] = 'A';
								}
							}
						} else {
							if (startx < endx) {
								//coming from the bottom going right
								testLevel[currenty][currentx] = '4';
							} else if (startx > endx) {
								//coming from the bottom going left
								testLevel[currenty][currentx] = '3';
							}
						}
					} else {
						threeWay = random.nextInt(10);

						if (threeWay > 6) {
							if (random.nextInt(2) == 1) {
								//coming from the bottom going up, with a split left
								testLevel[currenty][currentx] = '7';
								buildPath(currentx, currenty, 7, testLevel, false);
							} else {
								//coming from the bottom going up, with a split right
								testLevel[currenty][currentx] = '8';
							}
						} else {
							//coming from the bottom going up
							testLevel[currenty][currentx] = '1';
						}
					}
				}
			}

			if (currenty == endy) {
				yreached = true;
			}

			if (xreached) {
				if (yreached) {
					complete = true;
				}
			}

		}

		testLevel[endy][endx] = 'E';

		for (int i = 0; i < testLevel.length; i++) {
			for (int j = 0; j < testLevel.length; j++) {
				switch (testLevel[i][j]) {
				case 'L':
					System.out.print("L");
					break;

				case 'R':
					System.out.print("R");
					break;

				case 'U':
					System.out.print("U");
					break;

				case 'D':
					System.out.print("D");
					break;

				case 'E':
					System.out.print("E");
					break;

				case '0':
					System.out.print("0");
					break;

				case '1':
					System.out.print("║");
					break;

				case '2':
					System.out.print("═");
					break;

				case '3':
					System.out.print("╗");
					break;

				case '4':
					System.out.print("╔");
					break;

				case '5':
					System.out.print("╝");
					break;

				case '6':
					System.out.print("╚");
					break;

				case '7':
					System.out.print("╣");
					break;

				case '8':
					System.out.print("╠");
					break;

				case '9':
					System.out.print("╩");
					break;

				case 'A':
					System.out.print("╦");
					break;
				}
			}

			System.out.print("\n");
		}
	}

	public static void buildPath(int x, int y, int direction, char[][] testLevel, boolean fromX) {
		//boolean building = true;
		int nextX = x;
		int nextY = y;
		System.out.print("x: " + x + " y: " + y + "\n");
		
		if (x == endx) {
			if (y == endy) {
				return;
			}
		}
		
		switch (direction) { 

		case 7:

			if (fromX) {
				System.out.print(fromX + "\n");
				if (starty > endy) {
					nextY++;
					if (nextY < sizeY && nextY > -1) {
						testLevel[nextY][x] = '1';
						return;
					}
				} else if (starty < endy) {
					nextY--;
					if (nextY < sizeY && nextY > -1) {
						testLevel[nextY][x] = '1';
						return;
					}
				}
			} else {
				System.out.print(fromX + "\n");
				if (starty > endy) {
					if (x != endx) {
						nextY--;
						if (nextY < sizeY && nextY > -1) {
							testLevel[nextY][x] = '1';
							return;
						}
					} else {
						nextX--;
						if (nextX < sizeX && nextX > -1) {
							testLevel[y][nextX] = '2';
							return;
						}
					}
				} else if (starty < endy) {
					if (x != endx) {
						nextY++;
						if (nextY < sizeY && nextY > -1) {
							testLevel[nextY][x] = '1';
							return;
						}
					} else {
						nextX--;
						if (nextX < sizeX && nextX > -1) {
							testLevel[y][nextX] = '2';
							return;
						}
					}
				}
			}

		case 8:



		case 9:

		}
	}

}
</pre>
</html>

